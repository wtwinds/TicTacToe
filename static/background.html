<!DOCTYPE html>
<html>
<head><title>Background Music</title></head>
<body style="margin:0; padding:0; background:transparent;">
  <audio id="bg-music" src="/static/background.mp3" loop></audio>

  <script>
    const bgMusic = document.getElementById("bg-music");

    // Only play once
    if (!window.hasPlayedMusic) {
      bgMusic.play();
      window.hasPlayedMusic = true;
    }

    window.addEventListener("message", function(event) {
      if (event.origin !== window.location.origin) return;
      if (event.data === "toggleMusic") {
        if (bgMusic.paused) {
          bgMusic.play();
        } else {
          bgMusic.pause();
        }
      }
      if (event.data === "stopMusic") {
        bgMusic.pause();
      }
    });
  </script>
</body>
</html>